#include "Kargono/kgpch.h"
#include "../../Application/Objects/Objects.h"
#include "../../Library.h"

/*============================================================================================================================================================================================
 *============================================================================================================================================================================================
 * ModelRenderer Class
 *============================================================================================================================================================================================
 *============================================================================================================================================================================================*/

 /*============================================================================================================================================================================================
  * Overloaded Constructors
  *============================================================================================================================================================================================*/

ModelRenderer::ModelRenderer(Orientation& orientation,
	Model* model,
	GLShader* shader)

{
	this->orientation = &orientation;
	this->model = model;
	this->shader = shader;
	
}


ModelRenderer::ModelRenderer(Orientation& orientation)
{
	this->orientation = &orientation;
	this->model = Resources::currentApplication->renderer->defaultModel;
	this->shader = Resources::currentApplication->renderer->defaultShader;
	
}

ModelRenderer::~ModelRenderer()
{
	orientation = nullptr;
	model = nullptr;
	shader = nullptr;
}

/*============================================================================================================================================================================================
 * Getter/Setter
 *============================================================================================================================================================================================*/


/*============================================================================================================================================================================================
 * External Functionality
 *============================================================================================================================================================================================*/

void ModelRenderer::addLightSource(glm::vec3 color)
{
	this->lightSource = LightSource(this->orientation->translation, color);
	this->shader = Resources::shaderManager.lightSourceShader;
	lightSource.parentObject = LightSource::OBJECT;
	Resources::currentApplication->renderer->lightSourceRenderBuffer.push_back(&lightSource);
}